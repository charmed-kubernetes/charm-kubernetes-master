restart:
  description: Restart the Kubernetes master services on demand.
create-rbd-pv:
  description: Create RADOS Block Device (RDB) volume in Ceph and creates PersistentVolume. Note this is deprecated on Kubernetes >= 1.10 in favor of CSI, where PersistentVolumes are created dynamically to back PersistentVolumeClaims.
  params:
    name:
      type: string
      description: Name the persistent volume.
      minLength: 1
    size:
      type: integer
      description: Size in MB of the RBD volume.
      minimum: 1
    mode:
      type: string
      default: ReadWriteOnce
      description: Access mode for the persistent volume.
    filesystem:
      type: string
      default: xfs
      description: File system type to format the volume.
    skip-size-check:
      type: boolean
      default: false
      description: Allow creation of overprovisioned RBD.
  required:
    - name
    - size
namespace-list:
  description: List existing k8s namespaces
namespace-create:
  description: Create new namespace
  params:
    name:
      type: string
      description: Namespace name eg. staging
      minLength: 2
  required:
    - name
namespace-delete:
  description: Delete namespace
  params:
    name:
      type: string
      description: Namespace name eg. staging
      minLength: 2
  required:
    - name
upgrade:
    description: Upgrade the kubernetes snaps
    params:
      fix-cluster-name:
        type: boolean
        default: true
        description: >-
          If using the OpenStack cloud provider, whether to fix the cluster
          name sent to it to include the cluster tag. This fixes an issue
          with load balancers conflicting with other clusters in the same
          project but will cause new load balancers to be created which will
          require manual intervention to resolve.
sa-create:
  description: Create a new ServiceAccount
  params:
    name:
      type: string
      description: Name of the serviceaccount to create
      minLength: 2
    namespace:
      type: string
      description: |
        Namespace for the serviceaccount. If unspecified, the "default"
        namespace will be used.
    role:
      type: string
      description: |
        Role to bind to the serviceaccount. If specified, the role must already
        exist in the cluster. If unspecified, a new "$name-role" and
        "$name-rolebinding" will be created.
  required:
    - name
sa-delete:
  description: |
    Delete a ServiceAccount and related RoleBinding. Namespaces and Roles are
    not deleted with this action.
  params:
    name:
      type: string
      description: Name of the serviceaccount to delete
      minLength: 2
    namespace:
      type: string
      description: |
        Namespace of the serviceaccount to delete. If unspecified, the "default"
        namespace will be used. This is only used to identify the serviceaccount;
        namespaces are not deleted by this action.
  required:
    - name
sa-list:
  description: List existing ServiceAccounts
  params:
    namespace:
      type: string
      description: |
        Namespace for the serviceaccounts to list. If unspecified, the "default"
        namespace will be used.
get-kubeconfig:
  description: Retrieve Kubernetes cluster config, including credentials
apply-manifest:
  description: Apply JSON formatted Kubernetes manifest to cluster
  params:
    json:
      type: string
      description: The content of the manifest to deploy in JSON format
      minLength: 2
  required:
  - json
